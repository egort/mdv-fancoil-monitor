# MDV Fancoil Monitor

Утилита для мониторинга и реверс-инжиниринга протокола фанкойлов MDV по RS485.

## Протокол

### Параметры порта
- Скорость: 4800 бод
- Биты данных: 8
- Чётность: None
- Стоп-биты: 1

### Формат запроса (17 байт)
```
FE AA C0 [ADDR] 00 80 00 00 00 00 00 00 00 00 3F [CRC] 55
```
- `FE AA` — заголовок
- `C0` — команда чтения
- `[ADDR]` — адрес устройства (0-63)
- `[CRC]` — контрольная сумма (129 - ADDR)
- `55` — конец пакета

### Формат ответа (32 байта)
```
FE AA C0 80 00 [ADDR] 00 XX XX [MODE] [SPEED] [SETTEMP] ... [SWING_H] [SWING_L] ... [CRC]
```

### Расшифровка байтов ответа

| Байт | Параметр | Значения |
|------|----------|----------|
| 9 | Режим | 0=OFF, 129=FAN, 130=DRY, 132=HEAT, 136=COOL, 145=AUTO |
| 10 | Скорость | 1=HIGH, 2=MED, 4=LOW |
| 11 | Уставка | температура °C |
| 21-22 | Свинг | 4,1=ON / 0,0=OFF |

## Установка

```bash
pip install pyserial
```

## Использование

### Автосканирование (поиск устройств)
```bash
python scan_auto.py
```

### Мониторинг в реальном времени
```bash
python monitor.py
```
Нажмите **Q**, **ESC** или **Ctrl+C** для выхода.

### Интерактивный сканер
```bash
python mdv_scanner.py
```

## Настройка

Измените `COM10` на ваш порт в файлах:
- `monitor.py` — строка с `serial.Serial(port='COM10', ...)`
- `scan_auto.py` — аналогично

## Лицензия

MIT
